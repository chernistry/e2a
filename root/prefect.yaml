# Prefect deployment configuration for Octup simplified flows
name: octup-flows
prefect-version: 3.0.0

# Docker environment - code mounted via volumes
build: null
push: null
pull:
  - prefect.deployments.steps.set_working_directory:
      directory: /app

# Simplified deployments using octup-process-pool
deployments:
  # Event processor - real-time event processing
  - name: event-processor-final
    entrypoint: flows/event_processor_flow.py:event_processor_flow
    parameters:
      tenant: demo-3pl
      lookback_hours: 1
      enable_ai_processing: true
    schedule:
      interval: 900  # Every 15 minutes for near real-time processing
    work_pool:
      name: octup-process-pool
      job_variables:
        env:
          PYTHONPATH: /app

  # Business operations - daily business processes
  - name: business-operations-final
    entrypoint: flows/business_operations_flow.py:business_operations_flow
    parameters:
      tenant: demo-3pl
      lookback_hours: 24
      enable_billing: true
    schedule:
      interval: 86400  # Daily
    work_pool:
      name: octup-process-pool
      job_variables:
        env:
          PYTHONPATH: /app
