# ======================================================================
# Prefect Cloud Configuration
# ======================================================================
PREFECT_WORKSPACE_ID=REPLACE_ME_WORKSPACE_ID
# Prefect Cloud requires Account ID and API Key for agent/deployment:
PREFECT_ACCOUNT_ID=REPLACE_ME_ACCOUNT_ID
PREFECT_API_KEY=REPLACE_ME_API_KEY
# Full Prefect Cloud API URL (used by agent and CLI):
PREFECT_API_URL=https://api.prefect.cloud/api/accounts/${PREFECT_ACCOUNT_ID}/workspaces/${PREFECT_WORKSPACE_ID}
# Agent queue/label (must match what you specify in Deployment):
PREFECT_AGENT_QUEUE=default


# ======================================================================
# Supabase Configuration
# ======================================================================
# Local Supabase (for local development)
# SUPABASE_DB_URL=postgresql://postgres:REPLACE_ME_PASSWORD@localhost:5432/postgres

# Cloud Supabase (managed Postgres)
# Connection pooling (PgBouncer) — for the application:
DATABASE_URL=postgresql+psycopg://<your-db-user>:REPLACE_ME_PASSWORD_URLENC@<your-host>:6543/postgres?pgbouncer=true&sslmode=require
# Direct connection — for migrations:
DIRECT_URL=postgresql+psycopg://<your-db-user>:REPLACE_ME_PASSWORD_URLENC@<your-host>:5432/postgres?sslmode=require

# Real password (must be URL-encoded for use in URLs)
CLOUD_DB_PASSWORD=REPLACE_ME_PASSWORD
CLOUD_DB_PASSWORD_URLENC=REPLACE_ME_PASSWORD_URLENC


# ======================================================================
# Redis Configuration
# ======================================================================
# Local Redis (for local development)
# REDIS_URL=redis://localhost:6379/0

# Redis Cloud (managed Redis)
REDIS_DB_NAME=REPLACE_ME_DB_NAME
REDIS_CLOUD_API_KEY=REPLACE_ME_API_KEY
REDIS_CLOUD_PUBLIC_ENDPOINT=REPLACE_ME_ENDPOINT
REDIS_PASSWORD=REPLACE_ME_PASSWORD
# Application uses TLS connection to Redis Cloud (rediss://)
REDIS_URL=rediss://default:${REDIS_PASSWORD}@${REDIS_CLOUD_PUBLIC_ENDPOINT}/0


# ======================================================================
# New Relic and Observability
# ======================================================================
# New Relic License Key
NEW_RELIC_LICENSE_KEY=REPLACE_ME_LICENSE_KEY
# OTLP gRPC endpoint for New Relic:
OTEL_EXPORTER_OTLP_ENDPOINT=https://otlp.nr-data.net:4317
# API key header for OTLP:
OTEL_EXPORTER_OTLP_HEADERS=api-key=${NEW_RELIC_LICENSE_KEY}
# Additional OTEL resource attributes:
OTEL_SERVICE_NAME=octup-e2a
OTEL_RESOURCE_ATTRIBUTES=deployment.environment=dev,team=platform

# Observability provider toggles (alternatives to New Relic)
# Options: newrelic | sentry | signoz | gigapipe
OBSERVABILITY_PROVIDER=newrelic
# For Sentry (optional):
SENTRY_DSN=
SENTRY_ENV=dev
# For SigNoz/gigapipe specify OTLP endpoint/headers if used:
SIGNOZ_OTLP_ENDPOINT=
SIGNOZ_OTLP_HEADERS=
GIGAPIPE_OTLP_ENDPOINT=
GIGAPIPE_OTLP_HEADERS=


# ======================================================================
# Application / API Settings
# ======================================================================
APP_ENV=dev
SERVICE_NAME=REPLACE_ME_SERVICE_NAME
LOG_LEVEL=INFO
PROMETHEUS_SCRAPE_PATH=/metrics

# Default tenant for requests
X_TENANT_ID=demo-tenant

# Auth/JWT secret for /admin
JWT_SECRET=REPLACE_ME_SECRET

# Maximum allowed request body size in bytes
MAX_REQUEST_BODY_BYTES=1048576


# ======================================================================
# AI Configuration
# ======================================================================
AI_PROVIDER_BASE_URL=https://<ai-provider-base-url>
AI_MODEL=REPLACE_ME_MODEL
AI_API_KEY=REPLACE_ME_API_KEY
AI_MAX_DAILY_TOKENS=200000
AI_MIN_CONFIDENCE=0.55
# Cost and reliability constraints
AI_TIMEOUT_SECONDS=3
AI_RETRY_MAX_ATTEMPTS=2
AI_SAMPLING_SEVERITY=important_only   # Options: all|important_only|off


# ======================================================================
# Prefect Flow Naming (Infrastructure Flow Parameters)
# ======================================================================
PREFECT_FLOW_NAME=REPLACE_ME_FLOW_NAME
PREFECT_DEPLOYMENT_NAME=REPLACE_ME_DEPLOYMENT_NAME
PREFECT_SCHEDULE_CRON=0 1 * * *   # Can also be configured in Prefect UI


# ======================================================================
# Datasets / Local Paths
# ======================================================================
# Kaggle dataset slug (for event converter):
KAGGLE_DATASET_SLUG=/data/dataset
# Directory to save converted events (local path or S3):
DATASET_EVENTS_DIR=./data/events